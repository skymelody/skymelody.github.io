---
layout:     post
title:      442. Find All Duplicates in an Array
date:       2020-10-17
author:     skymelody
header-img: img/the-first.png
catalog: false 
tags:

   - leetcode
---

Given an array of integers, 1 ≤ a[i] ≤ *n* (*n* = size of array), some elements appear **twice** and others appear **once**. Find all the elements that appear **twice** in this array. Could you do it without extra space and in O(*n*) runtime?

Examples:

```
Input:
[4,3,2,7,8,2,3,1]

Output:
[2,3]
```



思路：

因为数组元素从1～n，如果数组元素都是独一无二的，那么排序后元素值和下标是一一对应的。如果元素中存在重复元素，则无法一一对应。因此，对于元素I，在它第一次出现时把arr[I]上的元素取负数标记I出现过，当I第二次出现时，此时arr[I]已经是负数，我们就知道I元素重复了。

```cpp
vector<int> findDuplicates(vector<int>& nums) {
  vector<int> ans;
  for (int i = 0; i < nums.size(); ++i) {
    int pos = abs(nums[i])-1;
    if (nums[pos] < 0) {
      ans.push_back(pos+1);
    }
    else {
      nums[pos] = -nums[pos];
    }
  }
  return ans;
}
```

