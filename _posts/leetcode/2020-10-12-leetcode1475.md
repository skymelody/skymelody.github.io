---
layout:     post
title:      1475. Final Prices With a Special Discount in a Shop
date:       2020-10-12
author:     skymelody
header-img: img/the-first.png
catalog: false 
tags:
    - leetcode
---

Given the array prices where prices[i] is the price of the ith item in a shop. There is a special discount for items in the shop, if you buy the ith item, then you will receive a discount equivalent to prices[j] where j is the minimum index such that j > i and prices[j] <= prices[i], otherwise, you will not receive any discount at all.
Return an array where the ith element is the final price you will pay for the ith item of the shop considering the special discount.

Examples:
```
Input: prices = [8,4,6,2,3]
Output: [4,2,4,2,3]
Explanation:
For item 0 with price[0]=8 you will receive a discount equivalent to prices[1]=4, therefore, the final price you will pay is 8 - 4 = 4.
For item 1 with price[1]=4 you will receive a discount equivalent to prices[3]=2, therefore, the final price you will pay is 4 - 2 = 2.
For item 2 with price[2]=6 you will receive a discount equivalent to prices[3]=2, therefore, the final price you will pay is 6 - 2 = 4.
For items 3 and 4 you will not receive any discount at all.
```

思路：
1. 暴力法
2. 从后往前遍历，在这个过程中，使用stack保存下所有比prices[i]小的元素。prices[i] = prices[i] - stack.top()
```cpp
vector<int> finalPrices(vector<int>& prices) {
    stack<int> stk;
    int n = prices.size();
    for (int i = n-1; i >= 0; --i) {
        while (!stk.empty() && stk.top() > prices[i]) {
            stk.pop();
        }
        int val = stk.empty() ? 0 : stk.top();
        stk.push(prices[i]);
        prices[i] -= val;
    }
    return prices;
}
```
