---
layout:     post
title:      856. Score of Parentheses
date:       2021-1-24
author:     skymelody
header-img: img/the-first.png
catalog: false 
tags:
    - leetcode
---
Given a balanced parentheses string `S`, compute the score of the string based on the following rule:

- `()` has score 1
- `AB` has score `A + B`, where A and B are balanced parentheses strings.
- `(A)` has score `2 * A`, where A is a balanced parentheses string.



Examples:

```
Input: "()"
Output: 1

Input: "(())"
Output: 2

Input: "()()"
Output: 2

Input: "(()(()))"
Output: 6
```



思路：

1. 深度优先， 想法在注释中

   ```cpp
   class Solution {
   public:
       int dfs(string& S, int p, int q) {
           if (p >= q) return 0;
           
           // ans = scopeA + scopeB if scopeB exists
           // first we need to find scopeB's start index;
           int left_cnt = 0;
           int right_cnt = 0;
           int scope_b_start_idx= q;
           for (int i = p; i < q; ++i) {
               if (S[i] == '(') ++left_cnt;
               if (S[i] == ')') ++right_cnt;
               if (left_cnt == right_cnt) {
                   scope_b_start_idx = i;
                   break;
               }
           }
           int num_scope_b = dfs(S, scope_b_start_idx+1, q);
           
           // then we deal with scopeA. it's range is [p. scope_b_start_idx]
           // we peek S[p+1], if it is '(', then we need to double the num of scopeA, 
           // otherwise it's scope is 1
           int num_scope_a = (S[p+1] == '(' ? 2 * dfs(S, p+1, scope_b_start_idx-1) : 1);
           return num_scope_a + num_scope_b;
       }
       int scoreOfParentheses(string S) {
           return dfs(S, 0, S.size());
       }
   };
   ```
   
   

